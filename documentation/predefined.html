<h1>The document describes the predefined steps in Calabash iOS</h1>

<p>This document gives examples, not the full step definitions. It is a "human readable" description of the step definitions found
in the file <code>calabash_steps.rb</code> <code>(calabash-cucumber\lib\calabash-cucumber\calabash_steps.rb)</code>.</p>

<p>You can generalize the examples. For example, <code>Then I touch the "login" button</code> can have any string in quotes, not just "login". Most steps find views using accessibility labels, so you must enable accessibility on the simulator or phone you are testing on.</p>

<p>Also note that Calabash iOS is not limited to the steps defined in this document. You can write your own, so called, "custom steps". Calabash iOS is able to synthesize most touch events and find most views.</p>

<p>If you have any questions, please use the google group</p>

<p><a href="http://groups.google.com/group/calabash-ios">http://groups.google.com/group/calabash-ios</a></p>

<h2>Screenshots</h2>

<p>You can take a screenshot</p>

<pre><code>Then take picture
</code></pre>

<p>This will generate a .png prefixed with the step number.</p>

<h2>Touching (tapping)</h2>

<p>Touching arbitrary views by accessibility label:</p>

<pre><code>Then I touch "accLabel"
</code></pre>

<p>Buttons by accessibility label</p>

<pre><code>Then I touch the "login" button
</code></pre>

<p>or by number/index (not number starts with 1 not 0)</p>

<pre><code>Then I touch button number 1
</code></pre>

<p>Input fields (UITextFields). Note, this looks for an UITextField with the placeholder property set to the quoted string.</p>

<pre><code>Then I touch the "placeholder" input field
</code></pre>

<p>Lists (UITableCellView) by number. Note this can only be used to touch visible cells - it doesn't try to scroll down/up.</p>

<pre><code>Then I touch list item number 1
</code></pre>

<p>Switches (UISwitch),</p>

<pre><code>Then I toggle the switch
</code></pre>

<p>this step works if there is a single switch. Otherwise use,</p>

<pre><code>Then I toggle the "accLabel" switch
</code></pre>

<p>where "accLabel" should be the accessibilityLabel for the switch.</p>

<p>Built-in keyboard. Touching the Done/Search button</p>

<pre><code>Then I touch done
Then I touch search
</code></pre>

<p>Map views.</p>

<pre><code>Then I touch the user location
</code></pre>

<p>Coordinate based touches,</p>

<pre><code>Then I touch on screen 100 from the left and 250 from the top
</code></pre>

<h2>Entering text</h2>

<p>Note, all these steps work on text fields (UITextField).
Text is entered by setting the text directly on the object. We are thinking about support for entering using the native keyboard.</p>

<p>Calabash uses placeholders for identifying text fields, so <code>... the "login" input field</code> means the input field with <em>placeholder</em> "login".</p>

<p>Entering text by placeholder:</p>

<pre><code>Then I enter "text to write" into the "placeholder" input field
</code></pre>

<p>alias</p>

<pre><code>Then I fill in "placeholder" with "text to write"
</code></pre>

<p>Text by table (fields are by "placeholder")</p>

<pre><code>I fill in text fields as follows:
 | field      | text    |
 | Last Name  | Krukow  |
 | Email      | a@b.c   |
 | Username   | krukow  |
 | Password   | 123     |
 | Confirm    | 123     |
</code></pre>

<p>Text by input field number:</p>

<pre><code>Then I enter "text" into input field number 1
</code></pre>

<p>Clearing fields (like entering "")</p>

<pre><code>Then I clear "placeholder"
</code></pre>

<p>Clearing fields by number</p>

<pre><code>Then I clear input field number 1
</code></pre>

<h2>Waiting</h2>

<p>These are usually about waiting to see certain text or ui components. Usually these are identified by their accessibilityLabels, component type (like a navigation bar) or pure text like in a label or a web view.</p>

<p>Waiting for text, or a view with a certain accessibilityLabel</p>

<pre><code>Then I wait to see "text or label"
Then I wait for "text or label" to appear
</code></pre>

<p>wait for something to disappear</p>

<pre><code>Then I wait until I don't see "text or label"
I wait to not see "text or label"
</code></pre>

<p>waiting for a button with an accessibilityLabel</p>

<pre><code>Then I wait for the "login" button to appear
</code></pre>

<p>waiting for an iOS navigation bar with a certain title,</p>

<pre><code>Then I wait to see a navigation bar titled "title"
</code></pre>

<p>waiting for a text field</p>

<pre><code>Then I wait for the "label" input field
</code></pre>

<p>waiting for a number of text fields</p>

<pre><code>Then I wait for 2 input fields
</code></pre>

<p>waiting in general</p>

<pre><code>Then I wait
Then I wait and wait
Then I wait and wait and wait...
Then I wait for 2.3 seconds
</code></pre>

<p>(this 2,4, 10 or an arbitrary number of seconds).</p>

<h2>Back button</h2>

<p>In an iOS navigation bar, you can touch the "back" button using</p>

<pre><code>Then I go back
</code></pre>

<h2>Swipes</h2>

<p>Swiping an unspecified place (usually when you have big scroll view in the center of the screen). Swipe directions can be left, right, up and down.</p>

<pre><code>Then I swipe left
</code></pre>

<p>Swiping a scroll view by index/number (and offset), or accessibilityLabel</p>

<pre><code>Then I swipe left on number 2
Then I swipe left on number 2 at x 20 and y 10
Then I swipe left on "accLabel"
</code></pre>

<p>Swiping table cells, by number</p>

<pre><code>Then I swipe on cell number 2
</code></pre>

<h2>Pinch (for zooms)</h2>

<p>This step makes a small pinch to zoom in or out. Either at the first scroll view of the screen, or a the center of a view with a certain accessibility label.</p>

<pre><code>Then I pinch to zoom in
Then I pinch to zoom in on "accLabel"
</code></pre>

<h2>Scrolling</h2>

<p>Scrolling on scroll views. Direction can be left, right, up or down.</p>

<pre><code>Then I scroll down
Then I scroll down on "accLabel"
</code></pre>

<h2>Playback of touch events</h2>

<p>If you have recorded a touch event sequence as "mytouch" you can playback those using</p>

<pre><code>Then I playback recording "mytouch"
Then I playback recording "mytouch on "accLabel"
Then I playback recording "mytouch on "accLabel" with offset 10,22
</code></pre>

<h2>Device orientation</h2>

<p>You can rotate the device or simulator left or right.</p>

<pre><code>Then I rotate device left
</code></pre>

<p>(when using the LessPainful which runs physical devices, this step is implemented by performing an actual physical rotation of the device using our little robots :)</p>

<h2>Assertions</h2>

<p>Like waiting, these are usually about seeing certain text or ui components. Usually these are identified by their accessibilityLabels, component type (like a navigation bar) or pure text like in a label or a web view.</p>

<p>If the thing being asserted doesn't exist in the view, the test will fail.</p>

<p>Asserting existence of text, or a view with a certain accessibilityLabel</p>

<pre><code>Then I should see "text or label"
Then I should not see "text or label"
Then I see the text "some text"
Then I don't see the text "text or label"
Then I don't see the "someview"
Then I see the "someview"
</code></pre>

<p>Asserting existence of buttons:</p>

<pre><code>Then I should see a "login" button
Then I should not see a "login" button
</code></pre>

<p>More on text, prefix, suffix, and sub string.</p>

<pre><code>Then I should see text starting with "prefix"
Then I should see text containing "sub text"
Then I should see text ending with "suffix"
</code></pre>

<p>Seeing some text fields</p>

<pre><code>Then I see 2 input fields
Then I should see a "Username" input field
Then I should not see a "Username" input field
</code></pre>

<p>Seeing maps and user location</p>

<pre><code>Then I should see a map
Then I should see the user location
</code></pre>
